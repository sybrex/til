{% extends "layout.html" %}

{% block content %}
<div class="cover-container d-flex w-100 h-100 p-2 mx-auto flex-column">
    {% include 'navigation.html' %}

    {% if posts %}
    <div>
        <button type="button" id="btn-archive" class="btn btn-danger float-right">Archive all</button>
    </div>

    <table id="tils-table" class="table table-striped table-dark table-sm mt-2">
    <tbody>
        {% for post in posts %}
        <tr id="{{ post.code }}" class="d-flex til-post">
            <td class="col-1">
                <a href="{{ post.url }}" target="_blank">{{ post.source }}<br>{{ post.author }}</a>
            </td>
            <td class="col-9">
                {% if post.extended %}
                    <a data-toggle="collapse" href="#collapse-{{ post.code }}" aria-expanded="false" aria-controls="collapse-{{ post.code }}">{{ post.content }}</a>
                    <div class="collapse" id="collapse-{{ post.code }}">
                        <div class="card card-body text-white bg-dark">
                            {{ post.extended }}
                        </div>
                    </div>
                {% else %}
                    {{ post.content }}
                {% endif %}
            </td>
            <td class="col-1">
                {{ post.created.strftime('%Y.%m.%d') }}<br>
                {{ post.created.strftime('%H:%M:%S') }}
            </td>
            <td class="col-1">
                <button type="button" data-row="{{ post.code }}" class="btn-sm btn-success btn-current">cur</button>
                <button type="button" data-row="{{ post.code }}" class="btn-sm btn-primary btn-icebox">ice</button>
            </td>
        </tr>
        {% endfor %}
    </tbody>
    </table>
    {% endif %}

</div>
{% endblock %}